<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>导航间距测试</title>
    <style>
        /* 模拟网站的CSS变量 */
        :root {
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-6: 1.5rem;
            --color-text: #202124;
            --color-primary: #1a73e8;
            --transition: 0.2s ease-in-out;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .device-info {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        /* 测试版本1: 使用gap */
        .nav-test-gap {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: var(--space-6);
            background: #f0f8ff;
            padding: 10px;
            border-radius: 4px;
        }
        
        /* 测试版本2: 使用margin降级 */
        .nav-test-margin {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            background: #f0fff0;
            padding: 10px;
            border-radius: 4px;
        }
        
        .nav-test-margin .nav-item {
            margin-right: var(--space-6);
        }
        
        .nav-test-margin .nav-item:last-child {
            margin-right: 0;
        }
        
        /* 测试版本3: 修复后的版本 - 更小间距并居中 */
        .nav-test-fixed {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: var(--space-4);
            background: #fffacd;
            padding: 10px;
            border-radius: 4px;
            justify-content: center;
            align-items: center;
        }
        
        .nav-test-fixed .nav-item {
            margin-right: var(--space-4);
        }
        
        .nav-test-fixed .nav-item:last-child {
            margin-right: 0;
        }
        
        /* 支持gap的设备使用更小的gap */
        @supports (gap: 1rem) {
            .nav-test-fixed {
                gap: var(--space-4);
            }
            
            .nav-test-fixed .nav-item {
                margin-right: 0;
            }
        }
        
        /* 平板设备特定修复 - 使用更小间距 */
        @media only screen and (min-width: 768px) and (max-width: 1024px) {
            .nav-test-fixed .nav-item + .nav-item {
                margin-left: var(--space-4);
            }
        }
        
        .nav-link {
            color: var(--color-text);
            text-decoration: none;
            font-weight: 500;
            padding: var(--space-2) var(--space-3);
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            display: block;
            transition: all var(--transition);
        }
        
        .nav-link:hover {
            color: var(--color-primary);
            border-color: var(--color-primary);
        }
        
        .support-info {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            margin-top: 20px;
        }
    </style>
    <script>
        function getDeviceInfo() {
            return {
                userAgent: navigator.userAgent,
                screen: `${screen.width}x${screen.height}`,
                viewport: `${window.innerWidth}x${window.innerHeight}`,
                devicePixelRatio: window.devicePixelRatio,
                orientation: screen.orientation?.type || 'unknown'
            };
        }
        
        function checkCSSSupport() {
            return {
                gap: CSS.supports('gap', '1rem'),
                flexbox: CSS.supports('display', 'flex'),
                '@supports': typeof CSS !== 'undefined' && typeof CSS.supports === 'function'
            };
        }
        
        window.addEventListener('load', function() {
            const deviceInfo = getDeviceInfo();
            const cssSupport = checkCSSSupport();
            
            document.getElementById('device-info').innerHTML = `
                <strong>设备信息:</strong><br>
                屏幕: ${deviceInfo.screen} | 视窗: ${deviceInfo.viewport} | 像素比: ${deviceInfo.devicePixelRatio}<br>
                方向: ${deviceInfo.orientation}<br>
                UA: ${deviceInfo.userAgent}
            `;
            
            document.getElementById('css-support').innerHTML = `
                <strong>CSS特性支持:</strong><br>
                gap属性: ${cssSupport.gap ? '✅ 支持' : '❌ 不支持'}<br>
                flexbox: ${cssSupport.flexbox ? '✅ 支持' : '❌ 不支持'}<br>
                @supports查询: ${cssSupport['@supports'] ? '✅ 支持' : '❌ 不支持'}
            `;
        });
        
        window.addEventListener('resize', function() {
            const deviceInfo = getDeviceInfo();
            document.getElementById('device-info').innerHTML = `
                <strong>设备信息:</strong><br>
                屏幕: ${deviceInfo.screen} | 视窗: ${deviceInfo.viewport} | 像素比: ${deviceInfo.devicePixelRatio}<br>
                方向: ${deviceInfo.orientation}<br>
                UA: ${deviceInfo.userAgent}
            `;
        });
    </script>
</head>
<body>
    <h1>📱 导航间距兼容性测试</h1>
    
    <div id="device-info" class="device-info">加载设备信息中...</div>
    
    <div class="test-container">
        <h2>🧪 测试1: 仅使用gap属性</h2>
        <p>在不支持gap的设备上，按钮会挨在一起</p>
        <ul class="nav-test-gap">
            <li class="nav-item"><a href="#" class="nav-link">Home</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Today News</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Past News</a></li>
        </ul>
    </div>
    
    <div class="test-container">
        <h2>🧪 测试2: 仅使用margin降级</h2>
        <p>所有设备都应该有正确的间距</p>
        <ul class="nav-test-margin">
            <li class="nav-item"><a href="#" class="nav-link">Home</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Today News</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Past News</a></li>
        </ul>
    </div>
    
    <div class="test-container">
        <h2>✅ 测试3: 修复后的版本（推荐）</h2>
        <p>结合了gap和margin，提供最佳兼容性</p>
        <ul class="nav-test-fixed">
            <li class="nav-item"><a href="#" class="nav-link">Home</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Today News</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Past News</a></li>
        </ul>
    </div>
    
    <div id="css-support" class="support-info">检测CSS特性支持中...</div>
    
    <div class="test-container">
        <h2>🔍 如何验证修复效果</h2>
        <ol>
            <li><strong>在支持gap的设备</strong>: 测试1和测试3都应该有正确间距</li>
            <li><strong>在不支持gap的设备</strong>: 只有测试2和测试3应该有正确间距</li>
            <li><strong>所有设备</strong>: 测试3应该始终显示正确的间距</li>
        </ol>
        <p><strong>预期结果</strong>: 三个按钮之间应该有相等的间距，不会挨在一起</p>
    </div>
</body>
</html>
