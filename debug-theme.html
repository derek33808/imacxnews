<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Debug</title>
    <style>
        :root {
            --color-primary: #1a73e8;
            --color-text: #202124;
            --color-background: #ffffff;
            --color-surface: #ffffff;
            --color-border: #dadce0;
        }

        html.dark-theme,
        body.dark-theme,
        .dark-theme {
            --color-primary: #4285f4;
            --color-text: #e8eaed;
            --color-background: #202124;
            --color-surface: #292a2d;
            --color-border: #3c4043;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: var(--color-background);
            color: var(--color-text);
            transition: all 0.3s ease;
            padding: 20px;
        }

        .comment-section {
            background: var(--color-surface);
            border: 2px solid var(--color-border);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            transition: all 0.3s ease;
        }

        html.dark-theme .comment-section,
        body.dark-theme .comment-section,
        .dark-theme .comment-section {
            background: var(--color-surface) !important;
            border-color: var(--color-border) !important;
            color: var(--color-text) !important;
        }

        button {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 0;
        }

        .debug-info {
            margin: 20px 0;
            padding: 10px;
            border: 1px solid var(--color-border);
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>Theme Debug Test</h1>
    
    <button onclick="toggleTheme()">Toggle Dark Theme</button>
    
    <div class="debug-info">
        <p><strong>Current Theme:</strong> <span id="currentTheme">Light</span></p>
        <p><strong>HTML Classes:</strong> <span id="htmlClasses"></span></p>
        <p><strong>Body Classes:</strong> <span id="bodyClasses"></span></p>
        <p><strong>Background Color:</strong> <span id="bgColor"></span></p>
        <p><strong>Surface Color:</strong> <span id="surfaceColor"></span></p>
    </div>
    
    <div class="comment-section">
        <h3>Comments Section</h3>
        <p>This should change background color when theme is toggled.</p>
        <p>Light theme: white background</p>
        <p>Dark theme: dark gray background (#292a2d)</p>
    </div>

    <script>
        function toggleTheme() {
            document.documentElement.classList.toggle('dark-theme');
            document.body.classList.toggle('dark-theme');
            
            // Save preference
            if (document.documentElement.classList.contains('dark-theme')) {
                localStorage.setItem('theme', 'dark');
            } else {
                localStorage.setItem('theme', 'light');
            }
            
            updateDebugInfo();
        }
        
        function updateDebugInfo() {
            const isDark = document.documentElement.classList.contains('dark-theme');
            document.getElementById('currentTheme').textContent = isDark ? 'Dark' : 'Light';
            document.getElementById('htmlClasses').textContent = document.documentElement.className || 'none';
            document.getElementById('bodyClasses').textContent = document.body.className || 'none';
            
            const computedStyle = getComputedStyle(document.body);
            document.getElementById('bgColor').textContent = computedStyle.backgroundColor;
            
            const commentSection = document.querySelector('.comment-section');
            const commentStyle = getComputedStyle(commentSection);
            document.getElementById('surfaceColor').textContent = commentStyle.backgroundColor;
        }
        
        // Initialize
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.documentElement.classList.add('dark-theme');
            document.body.classList.add('dark-theme');
        }
        
        // Handle system preference
        if (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark-theme');
            document.body.classList.add('dark-theme');
        }
        
        updateDebugInfo();
    </script>
</body>
</html>
